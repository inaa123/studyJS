<!-- map filter reduce 중첩 사용해보기 --> 
<script src="lib/fx.js"></script>

<script>
    const products = [
        { name : '일', price: 100 },
        { name : '이', price: 200 },    
        { name : '삼', price: 150 },
        { name : '사', price: 300 },
        { name : '오', price: 250 }
    ];

    //가격 뽑는 map함수
    log(map(p => p.price, products)); 

    //특정 금액미만 상품 뽑을 땐 map이 갖는 products를 축약해주면 된다.(filter이용해서)
    log(map(p => p.price, filter(p => p.price < 200, products)));

    //200 미만의 상품들의 가격을 합친 가격만들기
    const add = (a, b) => a + b;
    log(
        reduce(
            add, 
            map(p => p.price, 
                filter(p => p.price < 200, products)))); //reduce를 사용하면서 map을 통해서 받은 값
    // 오른쪽에서 왼쪽으로 읽어감(1.filter(product를 200미만으로 필터하고) 2.map(해당하는 값의 price를 map으로 뽑아낸다), 3.reduce( 해당하는 모든값을 add로 축약한다.) 4.출력한다.)   

    log( //다른 방법 map과 filter위치 바꾸기
        reduce(
            add, 
            filter(n => n >= 200, 
                map(p => p.price, products))));
    //1.map(map을 통해 price를 뽑아준다.) 2.filter(filter에선 숫자가 되니 n, 숫자가 200이상) 3

    //함수형 프로그램이에선 함수를 중첩하고 연속적으로 실행하면서 하나의 값으로 평가해가며 원하는 값 출력한다.
</script>
