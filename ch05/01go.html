<script src="lib/fx.js"></script>
<script>
//ch05 : 코드를 값으로 다루어 표현력 높이기
//함수형 프로그래밍에선 코드를 값으로 다루는 방법을 많이 사용한다.
    const products = [
        { name : '일', price: 100 },
        { name : '이', price: 200 },    
        { name : '삼', price: 150 },
        { name : '사', price: 300 },
        { name : '오', price: 250 }
    ];

    const add = (a, b) => a + b;
    
    log(
        reduce(
            add,
            map(p => p.price,
                filter(p => p.price < 200, products))));
    console.clear();
</script>
<!-- 위 코드를 읽기 편하게 만들어보기-->

<script>
//go함수 만들기
    const go = (...args) => reduce((a, f) => f(a), args); // args인자들이 들어오면 첫번째 인자를 다음 함수의 인자로 전달하는 등 연속적으로 하나의 일을 한다.  
                                                        // 이 로직은 reduce라 할수있다.(reduce사용) args를 특정함수로 축약해서 하나의 값으로 만들어간다.                                                           
    go(
        add(0, 1),
        a => a + 10,
        a => a + 100,
        log);

//pipe함수 만들기 (go와 달리 함수를 리턴하는 함수. 
    //const pipe = () => () => {}; //함수를 리턴하는 함수! pipe함수는 내부에서 go를 사용하는 함수다.
    const pipe = (f, ...fs) => (...as) => go(f(...as), ...fs);
    
    //pipe함수 사용법
    const f = pipe ( //함수f는 pipe함수를 사용하여 만든다.
        (a, b) => a + b, //pipe함수에 기능 더 추가함. 인자 두개 받을 수 있게!
        a => a + 10,
        a => a + 100); //세개의 함수를 연속적으로 실행하여 축약하는 하나의 함수를 만들어서 함수를 리턴한다.

        log(f(0, 1)); // go함수값과 똑같이 111 출력돼야함.
</script>